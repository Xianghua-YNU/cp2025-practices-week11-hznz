# 亥姆霍兹线圈磁场计算与可视化实验报告

## 1. 实验目的
1.  理解亥姆霍兹线圈原理，实现其磁场计算与可视化。
2.  分析亥姆霍兹线圈中心区域磁场的均匀性。
3.  (可选) 探究非亥姆霍兹线圈配置下的磁场分布。

## 2. 实验原理与方法

**2.1 核心原理:**
*   **单个载流圆环:** 磁场由毕奥-萨伐尔定律计算，对线圈电流元 $Id\mathbf{l}$ 的贡献进行积分。在 $yz$-平面上，主要计算 $B_y$ 和 $B_z$ 分量。
*   **双线圈系统:** 总磁场是两个线圈（半径 $R_1, R_2$，中心分别位于 $z_{c1}=+d/2, z_{c2}=-d/2$）产生磁场的矢量和。
*   **亥姆霍兹条件:** $R_1 = R_2 = R$ 且线圈间距 $d = R$。

**2.2 计算方法:**
*   **数值积分:** 对每个线圈，沿其周长（角度 $\phi'$ 从 $0$ 到 $2\pi$）数值积分（如 `np.trapezoid`）各电流元产生的 $dB_y$ 和 $dB_z$。
*   **叠加:** 将两个线圈在 $yz$-平面网格点上产生的磁场分量矢量相加。
*   **可视化:** 使用 `plt.streamplot` (磁场线) 和可选的 `plt.contourf` (磁感应强度大小)。

**2.3 主要参数:**
*   $\mu_0 = 4\pi \times 10^{-7} \text{ T}\cdot\text{m/A}$, $I = 1.0 \text{ A}$
*   **亥姆霍兹配置:** $R_1 = R_2 = R = [0.5 \text{ m}]$, $d = R = [0.5 \text{ m}]$
*   **(可选) 非亥姆霍兹配置:** $R_1 = [\text{val}]$, $R_2 = [\text{val}]$, $d = [\text{val}]$

## 3. 实验结果

**3.1 亥姆霍兹线圈 ($R_1=R_2=R, d=R$):**

**3.1.1 磁场线图:**

![屏幕截图 2025-05-09 130441](https://github.com/user-attachments/assets/acd1b876-db48-4755-8f0f-35b665403c5a)

**图说明:** (简述磁场线分布特点，尤其关注中心区域的均匀性。)

磁场线呈对称分布，中心区域（Y≈0,Z≈0）存在一定均匀性，但边缘区域发散明显。
由于线圈间距 d=0.8m 大于半径 R=0.5m，不满足亥姆霍兹条件，导致中心均匀性较差。


**3.1.2 (可选) 磁感应强度大小等值线图:**

[在此处插入等值线图。]

**图说明:** (简述磁场强度分布，如何体现中心均匀性。)

[Your brief description]

**3.2 (可选) 非亥姆霍兹线圈:**

[在此处插入非亥姆霍兹配置的磁场线图。]

**图说明:** (与亥姆霍兹配置的主要区别。)

[Your brief description]

## 4. 分析与讨论

**4.1 磁场均匀性 (亥姆霍兹配置):**

(讨论中心区域 ($Y \approx 0, Z \approx 0$) 磁场的均匀性，可参考轴线上 $B_z(0,Z)$ 的变化。是否满足 $dB_z/dZ \approx 0$ 和 $d^2B_z/dZ^2 \approx 0$?)

当 d=R=0.5m 时，理论上中心区域满足 ∂Bz/∂z≈0，磁场均匀性最佳。
本实验设置 d=0.8m，导致中心区域 Bz随z变化显著，均匀性降低（可通过对比 d=0.5m 的仿真验证）。
**4.2 磁场特点与问题:**

(简述磁场线的总体形态。讨论计算中遇到的问题，如积分点数、网格密度的影响。)
网格密度: 代码中 y 和 z 的网格点数为 25，积分角度分 20 段，可能导致精度不足。增加网格密度可提升计算准确性。
[Your analysis and discussion]

**4.3 (可选) 非亥姆霍兹配置影响:**

(参数变化如何影响中心磁场均匀性?)

若线圈半径或间距偏离亥姆霍兹条件，中心磁场均匀性被破坏。例如，当 d>R 时，磁场线发散更早，均匀区域缩小。

## 5. 结论

(总结主要发现：亥姆霍兹线圈磁场计算与可视化结果，中心区域均匀性特点，以及对磁场分布规律的理解。)

成功实现亥姆霍兹线圈磁场计算与可视化，但参数设置未严格满足 d=R，导致中心均匀性不足。
验证了亥姆霍兹条件对磁场均匀性的重要性，非理想配置下磁场分布显著偏离理论预期。
数值积分方法的精度受网格密度影响，需进一步优化参数以提高计算可靠性。

## 6. 附录：Python 代码片段
(粘贴核心计算或绘图函数的代码片段。)
```python
# Key code snippets
```
def Helmholtz_coils(r_low, r_up, d):
    # ...（略）...
    # 计算磁场分量
    dBy_integrand = r_low * (Z - d/2) * np.sin(Phi) / dist1**3 + r_up * (Z + d/2) * np.sin(Phi) / dist2**3
    dBz_integrand = r_low * (r_low - Y * np.sin(Phi)) / dist1**3 + r_up * (r_up - Y * np.sin(Phi)) / dist2**3
    # 积分并缩放
    By = (MU0 * I / (4 * np.pi)) * np.trapezoid(dBy_integrand)
    Bz = (MU0 * I / (4 * np.pi)) * np.trapezoid(dBz_integrand)
    return Y, Z, By, Bz

def plot_magnetic_field_streamplot(r_low, r_up, d):
    Y, Z, by, bz = Helmholtz_coils(r_low, r_up, d)
    # 绘制流线图
    plt.streamplot(Y[:,:,0], Z[:,:,0], by, bz, density=2, color='k')
    plt.xlabel('y / m'); plt.ylabel('z / m')
    plt.title(f'Magnetic Field Lines (R={r_low}, d={d})')
    plt.show()
